# Развертывание кластера PostgreSQL с помошью Terraform

## Скачивание terraform-спецификации

1. На ВМ загружен репозиторий с файлами для практической работы. Сохраните путь к репозиторию в переменной окружения
`REPO` (установите свой путь, если директория отличается от примера):
```
export REPO=/home/common/yandex-scale-2020-lab-k8s
echo "export REPO=/home/common/yandex-scale-2020-lab-k8s" >> ~/.bashrc
```

## Инициализация Terraform и развертывание инфраструктуры

1. Перейдите в каталог с описанием инфраструктуры приложения и инициализируйте Terraform:
```
cd $REPO/terraform/
terraform init
```
2. Разверните инфраструктуру с помощью Terraform:
```
terraform apply -var yc_folder=$YC_FOLDER -var yc_token=$YC_TOKEN -var user=$USER
```

3. Развертывание кластера займет какое-то время. Оставьте открытым терминал с запущенным Terraform 
и перейдите к следующему шагу. Позже мы проверим, что кластер создался.
