# Изменения в архитектуре сервиса для обеспечения отказойстойчивости

После выполнения всех шагов у нас есть:
* MDB PostgreSQL с одним хостом
* Managed Kubernetes с зональным мастером (1 хост) и группой узлов из одного узла
* Одна реплика приложения, запущенная в k8s

# Отказоустойчивый MDB PostgreSQL

В MDB можно увеличить количество хостов в кластере без остановки работы.
1. Зайдите во вкладку `Managed Service for PostgreSQL` в UI, выберите созданный кластер, во вкладке `Хосты` добавьте хост;
2. Выберите зону доступности, отличную от той, которая используется для первого хоста;
3. Убедитесь, что у хостов в кластере достаточно ресурсов, чтобы обрабатывать возвросшую нагрузку при падении одного
или нескольких хостов.

# Отказоустойчивый Managed Kubernetes

Необходимо сделать региональный мастера, состоящий из трех хостов. Тип мастера уже созданного кластера
поменять нельзя, поэтому надо создать новый кластер.
1. Зайдите во вкладку `Managed Service for Kubernetes` и создайте новый кластер;
2. Выберите тип мастера `Региональный`;
3. Создайте группу узлов с 3 узлами;
4. Убедитесь, что у хостов в группе узлов достаточно ресурсов, чтобы обрабатывать возвросшую нагрузку при падении одного
или нескольких хостов.

# Отказоустойчивое приложение

При деплое приложения в k8s мы указывали одну реплику, надо увеличить количество реплик до трех. Также уже создан
балансировщик нагрузки, который будет распределять нагрузку по всем трем репликам.
